version: "3.8"

services:
  whatsapp-bridge:
    build: ./bridge
    container_name: ha-whatsapp-bridge
    restart: unless-stopped
    ports:
      - "3000:3000"
    environment:
      PORT: 3000
      API_TOKEN: ${API_TOKEN:-change_me_to_a_random_secret}
      SESSION_PATH: /app/.wwebjs_auth
    volumes:
      - whatsapp_session:/app/.wwebjs_auth
    # Uncomment if you need to share the network with Home Assistant
    # network_mode: host

volumes:
  whatsapp_session:
